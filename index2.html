<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hvor skal jeg parkere?</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        h1 {
            text-align: center;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
        }
        .input-group {
            margin-bottom: 20px;
        }
        .result {
            margin-top: 20px;
        }
        .parking-options {
            list-style-type: none;
            padding: 0;
        }
        .parking-options li {
            margin-bottom: 10px;
        }
        .map-placeholder {
            width: 100%;
            height: 300px;
            background-color: #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 20px;
        }
        .cost-details {
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Hvor skal jeg parkere?</h1>
        <div class="input-group">
            <label for="start-datetime">Parking start at:</label>
            <input type="datetime-local" id="start-datetime">
        </div>
        <div class="input-group">
            <label for="end-datetime">Parking end at:</label>
            <input type="datetime-local" id="end-datetime">
        </div>
        <div class="result">
            <ul class="parking-options">
                <li>Parking space A: <span id="price-a"></span> kr</li>
                <li>Parking space B: <span id="price-b"></span> kr</li>
                <li>Parking space C: <span id="price-c"></span> kr</li>
            </ul>
        </div>
        <div class="map-placeholder">
            <img src="https://upload.wikimedia.org/wikipedia/commons/a/a6/Carlsberg_Byen_OpenStreetMap_01.png"  alt="Map of Carlsberg Byen" style="width:100%; height:100%;">
        </div>
        <div class="cost-details">
            <h3>Parking space A</h3>
            <p>Monday - Friday 08:00-18:00 16kr</p>
            <p>Monday - Friday 18:00-23:00 17kr</p>
            <p>Monday - Friday 23:00-08:00 6kr</p>
            <p>Saturday 08:00 to 17:00 16kr</p>
            <p>Saturday 17:00 to Monday 08:00 0kr</p>
            <h3>Parking space B</h3>
            <p>16 kr per hour</p>
            <h3>Parking space C</h3>
            <p>Monday to Friday 07:00 to 24:00</p>
            <p>Saturday 07:00 to 17:00</p>
            <p>Other times are free of charge.</p>
            <p>Max 110 kr per day and 550 kr per week</p>
        </div>
    </div>
    <script>
        document.getElementById('start-datetime').addEventListener('input', calculateParkingCost);
        document.getElementById('end-datetime').addEventListener('input', calculateParkingCost);

        function calculateParkingCost() {
            const startDateTime = document.getElementById('start-datetime').value;
            const endDateTime = document.getElementById('end-datetime').value;

            if (!startDateTime || !endDateTime) return;

            const start = new Date(startDateTime);
            const end = new Date(endDateTime);
            const hours = (end - start) / 1000 / 60 / 60;

            if (hours <= 0) return;

            const priceA = calculatePriceA(start, end);
            const priceB = 16 * hours;
            const priceC = calculatePriceC(start, end);

            const prices = [
                { name: 'Parking space A', price: priceA },
                { name: 'Parking space B', price: priceB },
                { name: 'Parking space C', price: priceC },
            ];

            prices.sort((a, b) => a.price - b.price);

            document.getElementById('price-a').innerText = prices[0].price.toFixed(2);
            document.getElementById('price-b').innerText = prices[1].price.toFixed(2);
            document.getElementById('price-c').innerText = prices[2].price.toFixed(2);
        }

        function calculatePriceA(start, end) {
            let total = 0;
            let current = new Date(start);

            while (current < end) {
                const day = current.getDay();
                const hour = current.getHours();

                if (day === 0 || (day === 6 && (hour >= 17 || hour < 8))) {
                    current.setHours(current.getHours() + 1);
                    continue;
                } else if (hour >= 8 && hour < 18) {
                    total += 16;
                } else if (hour >= 18 && hour < 23) {
                    total += 17;
                } else {
                    total += 6;
                }

                current.setHours(current.getHours() + 1);
            }

            return total;
        }

        function calculatePriceC(start, end) {
            let total = 0;
            let dailyTotal = 0;
            let weeklyTotal = 0;
            let current = new Date(start);

            while (current < end) {
                const day = current.getDay();
                const hour = current.getHours();
                const isChargeable = (day >= 1 && day <= 5 && hour >= 7 && hour < 24) || (day === 6 && hour >= 7 && hour < 17);

                if (isChargeable) {
                    if (dailyTotal < 110) {
                        const dailyHours = Math.min(1, (24 - hour), (end - current) / 1000 / 60 / 60);
                        dailyTotal += Math.min(110 - dailyTotal, Math.min(5 * dailyHours, 110 - dailyTotal));
                        total += Math.min(110 - total, dailyTotal);
                    }
                }

                current.setHours(current.getHours() + 1);
                if (current.getHours() === 0) {
                    weeklyTotal += dailyTotal;
                    dailyTotal = 0;
                }

                if (weeklyTotal >= 550) {
                    total = 550;
                    break;
                }
            }

            return total;
        }
    </script>
</body>
</html>